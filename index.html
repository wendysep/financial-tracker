<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Tracker</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tr:hover {
            background-color: #ddd;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        class FinancialTracker extends React.Component {
            constructor(props) {
                super(props);
                this.state = {
                    users: {},
                    currentUser: null,
                    username: '',
                    password: '',
                    incomeSource: '',
                    incomeAmount: '',
                    expenseCategory: '',
                    expenseAmount: '',
                    savingsCategory: '',
                    savingsAmount: '',
                    debtCategory: '',
                    debtAmount: '',
                    billCategory: '',
                    billAmount: '',
                    incomeDetails: {},
                    expenseDetails: {},
                    savingsDetails: {},
                    debtDetails: {},
                    billDetails: {},
                };
            }

            registerUser = () => {
                const { username, password, users } = this.state;
                if (username && password) {
                    if (!users[username]) {
                        users[username] = {
                            password,
                            incomeDetails: {},
                            expenseDetails: {},
                            savingsDetails: {},
                            debtDetails: {},
                            billDetails: {}
                        };
                        this.setState({ users });
                        alert('User registered successfully!');
                    } else {
                        alert('Username already exists.');
                    }
                } else {
                    alert('Please fill in both fields.');
                }
            };

            loginUser = () => {
                const { username, password, users } = this.state;
                if (users[username] && users[username].password === password) {
                    this.setState({ currentUser: username });
                } else {
                    alert('Invalid username or password.');
                }
            };

            addDetail = (type) => {
                const {
                    incomeSource, incomeAmount,
                    expenseCategory, expenseAmount,
                    savingsCategory, savingsAmount,
                    debtCategory, debtAmount,
                    billCategory, billAmount,
                    currentUser, users
                } = this.state;

                const category =
                    type === 'income' ? incomeSource :
                    type === 'expense' ? expenseCategory :
                    type === 'savings' ? savingsCategory :
                    type === 'debt' ? debtCategory :
                    billCategory;

                const amount =
                    type === 'income' ? parseFloat(incomeAmount) :
                    type === 'expense' ? parseFloat(expenseAmount) :
                    type === 'savings' ? parseFloat(savingsAmount) :
                    type === 'debt' ? parseFloat(debtAmount) :
                    parseFloat(billAmount);

                if (category && !isNaN(amount)) {
                    const detailsKey =
                        type === 'income' ? 'incomeDetails' :
                        type === 'expense' ? 'expenseDetails' :
                        type === 'savings' ? 'savingsDetails' :
                        type === 'debt' ? 'debtDetails' :
                        'billDetails';

                    const user = users[currentUser];

                    if (!user[detailsKey][category]) {
                        user[detailsKey][category] = Array(12).fill(0);
                    }

                    user[detailsKey][category][new Date().getMonth()] += amount;
                    this.setState({
                        users,
                        incomeSource: '',
                        incomeAmount: '',
                        expenseCategory: '',
                        expenseAmount: '',
                        savingsCategory: '',
                        savingsAmount: '',
                        debtCategory: '',
                        debtAmount: '',
                        billCategory: '',
                        billAmount: ''
                    });
                    alert(`${type.charAt(0).toUpperCase() + type.slice(1)} added!`);
                } else {
                    alert('Please enter a valid category and amount.');
                }
            };

            renderDetails = (type) => {
                const { currentUser, users } = this.state;
                const user = users[currentUser];
                if (!user) return null;

                const detailsKey =
                    type === 'income' ? 'incomeDetails' :
                    type === 'expense' ? 'expenseDetails' :
                    type === 'savings' ? 'savingsDetails' :
                    type === 'debt' ? 'debtDetails' :
                    'billDetails';

                const details = user[detailsKey];
                const months = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];

                return (
                    <table>
                        <thead>
                            <tr>
                                <th>{type.toUpperCase()}</th>
                                {months.map((month, index) => (
                                    <th key={index}>{month}</th>
                                ))}
                            </tr>
                        </thead>
                        <tbody>
                            {Object.entries(details).map(([category, amounts]) => (
                                <tr key={category}>
                                    <td>{category}</td>
                                    {amounts.map((amount, index) => (
                                        <td key={index}>${amount.toFixed(2)}</td>
                                    ))}
                                </tr>
                            ))}
                            <tr>
                                <td><strong>TOTAL</strong></td>
                                {months.map((_, index) => (
                                    <td key={index}>
                                        ${Object.values(details).reduce((acc, category) => acc + (category[index] || 0), 0).toFixed(2)}
                                    </td>
                                ))}
                            </tr>
                        </tbody>
                    </table>
                );
            };

            render() {
                const {
                    currentUser, username, password,
                    incomeSource, incomeAmount,
                    expenseCategory, expenseAmount,
                    savingsCategory, savingsAmount,
                    debtCategory, debtAmount,
                    billCategory, billAmount
                } = this.state;

                return (
                    <div>
                        {!currentUser ? (
                            <div>
                                <h2>Register</h2>
                                <input type="text" value={username} onChange={(e) => this.setState({ username: e.target.value })} placeholder="Username" />
                                <input type="password" value={password} onChange={(e) => this.setState({ password: e.target.value })} placeholder="Password" />
                                <button onClick={this.registerUser}>Register</button>

                                <h2>Login</h2>
                                <input type="text" value={username} onChange={(e) => this.setState({ username: e.target.value })} placeholder="Username" />
                                <input type="password" value={password} onChange={(e) => this.setState({ password: e.target.value })} placeholder="Password" />
                                <button onClick={this.loginUser}>Login</button>
                            </div>
                        ) : (
                            <div>
                                <h2>Income Details</h2>
                                {this.renderDetails('income')}
                                <h2>Add Income</h2>
                                <input type="text" value={incomeSource} onChange={(e) => this.setState({ incomeSource: e.target.value })} placeholder="Income Source" />
                                <input type="number" value={incomeAmount} onChange={(e) => this.setState({ incomeAmount: e.target.value })} placeholder="Amount" />
                                <button onClick={() => this.addDetail('income')}>Add Income</button>

                                <h2>Expense Details</h2>
                                {this.renderDetails('expense')}
                                <h2>Add Expense</h2>
                                <input type="text" value={expenseCategory} onChange={(e) => this.setState({ expenseCategory: e.target.value })} placeholder="Expense Category" />
                                <input type="number" value={expenseAmount} onChange={(e) => this.setState({ expenseAmount: e.target.value })} placeholder="Amount" />
                                <button onClick={() => this.addDetail('expense')}>Add Expense</button>

                                <h2>Savings Details</h2>
                                {this.renderDetails('savings')}
                                <h2>Add Savings</h2>
                                <input type="text" value={savingsCategory} onChange={(e) => this.setState({ savingsCategory: e.target.value })} placeholder="Savings Category" />
                                <input type="number" value={savingsAmount} onChange={(e) => this.setState({ savingsAmount: e.target.value })} placeholder="Amount" />
                                <button onClick={() => this.addDetail('savings')}>Add Savings</button>

                                <h2>Debt Details</h2>
                                {this.renderDetails('debt')}
                                <h2>Add Debt</h2>
                                <input type="text" value={debtCategory} onChange={(e) => this.setState({ debtCategory: e.target.value })} placeholder="Debt Category" />
                                <input type="number" value={debtAmount} onChange={(e) => this.setState({ debtAmount: e.target.value })} placeholder="Amount" />
                                <button onClick={() => this.addDetail('debt')}>Add Debt</button>

                                <h2>Bill Details</h2>
                                {this.renderDetails('bill')}
                                <h2>Add Bill</h2>
                                <input type="text" value={billCategory} onChange={(e) => this.setState({ billCategory: e.target.value })} placeholder="Bill Category" />
                                <input type="number" value={billAmount} onChange={(e) => this.setState({ billAmount: e.target.value })} placeholder="Amount" />
                                <button onClick={() => this.addDetail('bill')}>Add Bill</button>
                            </div>
                        )}
                    </div>
                );
            }
        }

        ReactDOM.render(<FinancialTracker />, document.getElementById('root'));
    </script>
</body>
</html>
